{% extends "base.html" %}

{% block title %}Write a {{ review_type }} Review - {{ block.super }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-surface dark:bg-darksurface p-8 rounded-lg shadow-md border border-border dark:border-darkborder">
    
    <form method="POST">
        {% csrf_token %}
        <fieldset>
            <legend class="text-2xl font-bold text-text dark:text-darktext border-b border-border dark:border-darkborder pb-4 mb-6">
                Write a Review for "{{ target_object.name }}"
            </legend>
            
            <!-- แสดงฟิลด์ Rating -->
            <div class="mb-5">
                <label for="{{ form.rating.id_for_label }}" class="block mb-2 text-sm font-medium text-text dark:text-darktext">Rating</label>
                {{ form.rating }}
                {% if form.rating.errors %}
                    <div class="text-red-500 text-sm mt-1">
                        {% for error in form.rating.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- แสดงฟิลด์ Comment -->
            <div class="mb-5">
                <label for="{{ form.comment.id_for_label }}" class="block mb-2 text-sm font-medium text-text dark:text-darktext">Your Review</label>
                {{ form.comment }}
                {% if form.comment.errors %}
                    <div class="text-red-500 text-sm mt-1">
                        {% for error in form.comment.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

        </fieldset>

        <div class="mt-6 flex flex-col-reverse sm:flex-row gap-3">
            <!-- ปุ่ม Cancel (เปลี่ยนลิงก์ตามประเภทรีวิว) -->
            {% if review_type == 'Store' %}
                <a href="{% url 'store_profile' pk=target_object.pk %}" class="w-full sm:w-auto text-center bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-text dark:text-darktext font-medium rounded-lg text-sm px-5 py-2.5">
                    Cancel
                </a>
            {% elif review_type == 'Product' %}
                <a href="{% url 'product_detail' pk=target_object.pk %}" class="w-full sm:w-auto text-center bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-text dark:text-darktext font-medium rounded-lg text-sm px-5 py-2.5">
                    Cancel
                </a>
            {% endif %}

            <!-- ปุ่ม Submit -->
            <button type="submit" class="w-full sm:flex-1 text-white bg-accent hover:bg-blue-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                Submit Review
            </button>
        </div>
    </form>

</div>
{% endblock content %}