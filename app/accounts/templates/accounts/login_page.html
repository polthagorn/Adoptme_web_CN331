{% extends "base.html" %}
{% block title %}Login{% endblock %}

{% block content %}

<div class="flex justify-center items-center py-20 px-4">

  <div class="w-full max-w-md bg-surface dark:bg-darksurface p-10 rounded-2xl shadow-xl
              border border-border dark:border-darkborder transition-all duration-500">

    <h2 class="text-3xl font-extrabold text-accent text-center mb-10">
      Login
    </h2>

    <form method="POST" class="space-y-10">
      {% csrf_token %}

      <!-- Username / Email -->
      <div class="relative">
        <input 
          type="text"
          name="username_or_email"
          required
          class="peer w-full px-4 pt-5 pb-2 rounded-xl bg-background dark:bg-darksurface
                 border border-border dark:border-darkborder text-text dark:text-darktext
                 focus:border-accent focus:outline-none transition-all duration-300
                 placeholder-transparent"
          placeholder="."
        >

        <label class="absolute left-4 top-1.5 text-gray-500 dark:text-gray-400 pointer-events-none
                       transition-all duration-300
                       peer-focus:text-accent peer-focus:-translate-y-5 peer-focus:text-sm peer-focus:font-semibold
                       peer-valid:-translate-y-5 peer-valid:text-sm peer-valid:font-semibold">
          Username or Email
        </label>
      </div>

      <!-- Password -->
      <div class="relative">
        <input 
          type="password"
          id="password"
          name="password"
          required
          class="peer w-full px-4 pt-5 pb-2 pr-12 rounded-xl bg-background dark:bg-darksurface
                 border border-border dark:border-darkborder text-text dark:text-darktext
                 focus:border-accent focus:outline-none transition-all duration-300
                 placeholder-transparent"
          placeholder="."
        >

        <label class="absolute left-4 top-1.5 text-gray-500 dark:text-gray-400 pointer-events-none
                       transition-all duration-300
                       peer-focus:text-accent peer-focus:-translate-y-5 peer-focus:text-sm peer-focus:font-semibold
                       peer-valid:-translate-y-5 peer-valid:text-sm peer-valid:font-semibold">
          Password
        </label>

        <!-- Toggle Password Icon -->
        <button 
          type="button" 
          onclick="togglePassword()"
          class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-300
                 hover:text-accent transition-colors"
        >
          <svg id="eye-icon" class="w-6 h-6" fill="none" viewBox="0 0 24 24"
               stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7
                     -1.274 4.057-5.064 7-9.542 7 -4.477 0 -8.268 -2.943 -9.542 -7z"/>
          </svg>
        </button>
      </div>

      <!-- Login button -->
      <button 
        type="submit"
        class="w-full py-3 rounded-xl bg-accent text-white font-semibold text-lg
               shadow-md hover:shadow-xl hover:bg-accent/90 active:scale-95
               transition-all duration-300"
      >
        Login
      </button>

    </form>

    <!-- Register -->
    <p class="text-center text-sm text-gray-500 dark:text-gray-400 mt-8">
      Don't have an account?
      <a href="{% url 'register' %}" class="text-accent font-semibold hover:underline">
        Create one
      </a>
    </p>

  </div>

</div>

<!-- Password Toggle Script -->
<script>
function togglePassword() {
  const pwd = document.getElementById("password");
  const icon = document.getElementById("eye-icon");

  if (pwd.type === "password") {
    pwd.type = "text";
    icon.innerHTML = `
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M13.875 18.825A10.05 10.05 0 0112 19
               c-4.478 0 -8.268 -2.943 -9.542 -7
               a9.965 9.965 0 011.563 -3.029m3.2 -2.328
               A9.953 9.953 0 0112 5c4.478 0 8.268 2.943
               9.542 7 -1.274 4.057 -5.064 7 -9.542 7z"/>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M3 3l18 18"/>
    `;
  } else {
    pwd.type = "password";
    icon.innerHTML = `
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M15 12a3 3 0 11 -6 0 3 3 0 016 0z"/>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M2.458 12C3.732 7.943 7.523 5 12 5
               c4.478 0 8.268 2.943 9.542 7
               -1.274 4.057 -5.064 7 -9.542 7
               -4.477 0 -8.268 -2.943 -9.542 -7z"/>
    `;
  }
}
</script>

{% endblock %}
